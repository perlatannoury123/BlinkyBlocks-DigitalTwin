#include <user_code.h>
#include <microphone.h>
#include <speaker.h>
#include <light.h>
#include <abstraction.h>
#include <debug_messages.h>
#include <layer3_generic.h>
#include <stdint.h>
#include <string.h>


uint8_t counter;
// =========================
// Initialization
// =========================
void BBinit() {
	sleep_sec(1);
    setColor(GREEN);  // Idle / Ready
    counter = 0;


}

// =========================
// Main loop
// =========================
void BBloop() {

    counter++; // increment tick number

        // --- Prepare a simple numeric message ---
        char msg[] = "Hi";

          // just send one byte (the counter)
		if(getId() == 3){
		// --- Send message to parent/root ---
			sleep_sec(2);
			send_debug_message(msg, sizeof(msg));
			sleep_sec(1);

		}

}

// =========================
// When a debug message is received
// =========================
uint8_t process_standard_packet(L3_packet *packet) {
	setColor(RED);
	return 0;
}
void process_standard_ack(L3_packet *p) {}
void process_standard_unack(L3_packet *p) {}
